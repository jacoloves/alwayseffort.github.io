# 達人に学ぶDB設計の読書メモ
はてぶにまとめる用のメモ

## 6章
### 学びのあったところ
統計情報がSQLのアクセスパスを決める重要な情報。   
カーナビのメタファーがわかりやすかった（非手続き型の説明   
B-treeインデックスが一番ポピュラー   
木の高さがそこまで高くない（3~4）から劣化が緩やか   
ソート処理はコストが高く、パフォーマンスチューニングの鬼門になりがち   
データ量が少ない（レコードが1万件以下）の場合はインデックス意味ない   
インデックスを貼った値は単体で検索させる   
主キーやユニークのある列には使わなくていい   
統計情報を取るタイミングは「データ大きく更新されたタイミングかつ夜間の時間帯」   

### 章のまとめ
統計情報とインデックスについて学んだ。   
今までインデックスについては曖昧に解釈していたので、その使われ方や種類について確認できたよかった。   
統計情報についても全く知らなかったので各データに行き着くまでの地図だという解釈ができただけでも良かった。   

## 7章
### 学びのあったところ
「何も考えてない」からバッドノウハウが生まれる   
配列型は使用しない。第一正規系を守る  
情報は可能な限り分解して持つ   
列の意味は一度決めたら変更不可（当たり前だけど…）   
単一参照テーブルは作成しない（色々な値がごった煮になったテーブル）   
データマートやサマリテーブルによって効率よくデータを検索できる。   
キー値は不変   

### 章のまとめ
テーブル設計のバッドノウハウについて学んだ。   
悪いテーブル設計というのは「何も考えてない」から生まれることと記載があったがその通りだと思った。   
過去の先人が設計してるため、設計の意図などは聞けないのがとても残念だ。   
これからは1～6章で学んだことを生かしてバッドノウハウに記載のあった事例を起こさないように心掛けたい。   
